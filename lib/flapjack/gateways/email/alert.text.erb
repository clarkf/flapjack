Hi <%= @alert.medium.contact.first_name %>

Monitoring has detected the following:

<% check = @alert.check -%>

Entity:           <%= check.entity.name %>
Check:            <%= check.name %>
State:            <%= @alert.state_title_case %>
Summary:          <%= @alert.summary %>
<% details = @alert.details; if details -%>
Details:          <%= details %>
<% end -%>
<% time = @alert.time; if time -%>
Time:             <%= Time.at(time.to_i).to_s %>
<% end -%>
<% state_duration = @alert.state_duration -%>
<% if state_duration && (state_duration > 40) -%>
Duration:         <%= ChronicDuration.output(state_duration, :keep_zero => true) || '0 secs' %>
<% end -%>
<% if @alert.last_state -%>
Previous State:   <%= @alert.last_state_title_case %>
<% end -%>
<% last_summary = @alert.last_summary; if last_summary -%>
Previous Summary: <%= last_summary %>
<% end -%>

Cheers,
Flapjack

